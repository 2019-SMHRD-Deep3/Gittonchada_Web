<!DOCTYPE html>
<html>
<head>
<title>Current Weather</title>
<meta charset="utf-8">
<script src="http://code.jquery.com/jquery-1.7.min.js"></script>
<style type="text/css">
.current {
	margin: 0 auto;
	text-align: center;
}
</style>
</head>
<script>
	// latitude, longitude, APIKey
	$
			.getJSON(
					'https://api.openweathermap.org/data/2.5/onecall?lat=37.57&lon=126.98&appid=dbf3abee8d29ca1bd9cefa8675b55c52&units=metric',
					function(oneCall) {

						//위도
						var lat = oneCall.lat;
						// 경도
						var lon = oneCall.lon;
						// 지역
						var timezome = oneCall.timezome;

						// Current Weather Data
						// 현재 시간
						var time = oneCall.current.dt;
						var now = new Date(time * 1000);
						var dt = now.getFullYear() + "-" + (now.getMonth() + 1)
								+ "-" + now.getDate() + " " + now.getHours()
								+ ":" + now.getMinutes() + " ";

						// 일출 시간
						var sunUp = oneCall.current.sunrise;
						var rTime = new Date(sunUp * 1000);
						var sunrise = rTime.getHours() + ":"
								+ rTime.getMinutes() + " ";

						// 일몰 시간
						var sunDown = oneCall.current.sunset;
						var sTime = new Date(sunDown * 1000);
						var sunset = sTime.getHours() + ":"
								+ sTime.getMinutes() + " ";

						// 현재 날씨
						var weather = oneCall.current.weather[0].description;

						// 날씨 아이콘
						var wIcon = oneCall.current.weather[0].icon;

						// 현재 기온
						var temp = oneCall.current.temp;

						// 체감 기온
						var feels_like = oneCall.current.feels_like;

						// 기압
						var pressure = oneCall.current.pressure;

						// 습도
						var humidity = oneCall.current.humidity;

						// 이슬점
						var dew_point = oneCall.current.dew_point;

						// 자외선
						var uvi = oneCall.current.uvi;

						// 운량
						var clouds = parseInt(oneCall.current.clouds / 10);

						// 가시거리
						var visibility = oneCall.current.visibility;

						// 풍속
						var wind_speed = oneCall.current.wind_speed;

						// 풍향
						var wind_deg = oneCall.current.wind_deg;

						// 강수량
						var rain;
						if(oneCall.current.rain != null){
							rain = oneCall.current.rain;
						}else{
							rain = 0;
						}
						
						// 적설량
						var snow;
						if(oneCall.current.snow != null){
							snow = oneCall.current.snow;
						}else{
							snow = 0;
						}
						

						$('.lat').append(lat);
						$('.lon').append(lon);
						$('.dt').append(dt);
						$('.sunrise').append(sunrise);
						$('.sunset').append(sunset);
						$('.weather').append(weather);
						$('.wIcon')
								.append(
										'<img src = "http://openweathermap.org/img/wn/' + wIcon + '.png"/>')
						$('.temp').append(temp);
						$('.feels_like').append(feels_like);
						$('.pressure').append(pressure);
						$('.humidity').append(humidity);
						$('.dew_point').append(dew_point);
						$('.uvi').append(uvi);
						$('.clouds').append(clouds);
						$('.visibility').append(visibility);
						$('.wind_speed').append(wind_speed);
						$('.wind_deg').append(wind_deg);
						$('.rain').append(rain);
						$('.snow').append(snow);
					});
</script>

<body>
	<div class="current">
		<h1>현재 기상</h1>
		<div>
			좌표 [ <span class="lat">위도 : </span> <span class="lon"> 경도 : </span> ]
		</div>
		<div>
			<span class="dt">현재 시간 : </span>
		</div>
		<div>
			<span class="sunrise">일출 시간 : </span>
		</div>
		<div>
			<span class="sunset">일몰 시간 : </span>
		</div>
		<div>
			<span class="weather">현재 날씨 : </span> <span class="wIcon"></span>
		</div>
		<div>
			<span class="temp">기온 : </span> <span>℃</span>
		</div>
		<div>
			<span class="feels_like">체감 온도 : </span> <span>℃</span>
		</div>
		<div>
			<span class="pressure">기압 : </span> <span>hpa</span>
		</div>
		<div>
			<span class="humidity">습도 : </span> <span>%</span>
		</div>
		<div>
			<span class="dew_point">이슬점 : </span> <span>℃</span>
		</div>
		<div>
			<span class="uvi">자외선 지수 : </span>
		</div>
		<div>
			<span class="clouds">운량 : </span> <span>%</span>
		</div>
		<div>
			<span class="visibility">가시거리 : </span> <span>m</span>
		</div>
		<div>
			<span class="wind_speed">풍속 : </span> <span>m/s</span>
		</div>
		<div>
			<span class="wind_deg">풍향 : </span>
		</div>
		<div>
			<span class="rain">강수량 : </span> <span>mm</span>
		</div>
		<div>
			<span class="snow">적설량 : </span> <span>mm</span>
		</div>
	</div>
</body>
</html>